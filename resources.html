<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scholarly - Study Resources</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <nav id="navbar" class="navbar">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-tasks"></i>
                    <span class="link-text">Quests</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="chat.html" class="nav-link">
                    <i class="fas fa-robot"></i>
                    <span class="link-text">AI Buddy</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="resources.html" class="nav-link">
                    <i class="fas fa-book"></i>
                    <span class="link-text">Resources</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link logout-link">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="link-text">Logout</span>
                </a>
            </li>
        </ul>
    </nav>

    <div class="container">
        <main style="width: 100%; max-width: 1200px;">
            <header>
                <h1>üìñ Study Resources Hub</h1>
            </header>

            <section class="resource-section">
                <h2>NCERT Textbooks (CBSE)</h2>
                <p class="section-description">Official NCERT textbooks for CBSE curriculum - Free PDFs available</p>
                <div class="resource-grid">
                    <div class="resource-card">
                        <h3>Class 6-8</h3>
                        <ul class="resource-list">
                            <li><a href="https://ncert.nic.in/textbook.php" target="_blank">All Subjects</a></li>
                        </ul>
                    </div>
                    <div class="resource-card">
                        <h3>Class 9-10</h3>
                        <ul class="resource-list">
                           <li><a href="https://ncert.nic.in/textbook.php" target="_blank">All Subjects</a></li>
                        </ul>
                    </div>
                    <div class="resource-card">
                        <h3>Class 11-12 Science</h3>
                        <ul class="resource-list">
                            <li><a href="https://ncert.nic.in/textbook.php" target="_blank">All Subjects</a></li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="resource-section">
                <h2>Free Learning Platforms</h2>
                <p class="section-description">Quality educational content aligned with Indian curriculum</p>
                <div class="resource-grid">
                    <div class="resource-card">
                        <h3>üéì DIKSHA</h3>
                        <p>National platform for school education by Government of India</p>
                        <a href="https://diksha.gov.in/" target="_blank" class="resource-btn">Visit DIKSHA</a>
                    </div>
                    <div class="resource-card">
                        <h3>üì∫ SWAYAM</h3>
                        <p>Free online courses from Class 9 to post-graduation</p>
                        <a href="https://swayam.gov.in/" target="_blank" class="resource-btn">Visit SWAYAM</a>
                    </div>
                    <div class="resource-card">
                        <h3>üè´ Khan Academy</h3>
                        <p>Free courses aligned with NCERT curriculum</p>
                        <a href="https://www.khanacademy.org/india" target="_blank" class="resource-btn">Visit Khan Academy</a>
                    </div>
                </div>
            </section>

            </main>
    </div>

    <style>
        /* All your existing inline styles for this page go here */
        .resource-section { background-color: #16213e; padding: 25px; border-radius: 10px; border: 2px solid #0f3460; margin-bottom: 20px; }
        .section-description { color: #b0b0b0; margin-bottom: 20px; font-size: 1.1rem; }
        .resource-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .resource-card { background-color: #0f3460; padding: 20px; border-radius: 8px; border: 1px solid #e94560; transition: all 0.3s; }
        .resource-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(233, 69, 96, 0.3); }
        .resource-card h3 { color: #fca311; margin-bottom: 15px; }
        .resource-list { list-style: none; padding: 0; }
        .resource-list li { margin-bottom: 10px; }
        .resource-list a { color: #e0e0e0; text-decoration: none; display: inline-flex; align-items: center; transition: color 0.3s; }
        .resource-list a::before { content: 'üìñ'; margin-right: 8px; }
        .resource-list a:hover { color: #fca311; }
        .resource-btn { display: inline-block; margin-top: 10px; padding: 10px 20px; background: linear-gradient(135deg, #e94560, #ff6b6b); color: white; text-decoration: none; border-radius: 5px; transition: all 0.3s; }
        .resource-btn:hover { transform: scale(1.05); box-shadow: 0 4px 10px rgba(233, 69, 96, 0.4); }
    </style>

    <script>
        const API_URL = "http://localhost:5000";

        // Securely check login status on page load
        (async function checkAuth() {
            try {
                const res = await fetch(`${API_URL}/api/me`, { credentials: 'include' });
                if (!res.ok) {
                    // If not authenticated, redirect to login
                    window.location.href = 'login.html';
                    return;
                }
                
                // If authenticated, get student info and update the page
                const data = await res.json();
                const studentInfo = data.studentInfo;
                updateStateBoardLink(studentInfo);

            } catch (err) {
                console.error("Auth check failed", err);
                window.location.href = 'login.html';
            }
        })();

        // Update state board link based on the user's board
        function updateStateBoardLink(studentInfo) {
            if (studentInfo && studentInfo.board) {
                const stateBoardLink = document.getElementById('state-board-link');
                const boardLinks = {
                    'MAHARASHTRA': 'https://www.mahahsscboard.in/',
                    'UP': 'https://upmsp.edu.in/',
                    'KARNATAKA': 'https://www.kseab.kar.nic.in/',
                    'TAMIL_NADU': 'https://www.dge.tn.gov.in/',
                    'WEST_BENGAL': 'https://wbbse.wb.gov.in/'
                };
                
                if (boardLinks[studentInfo.board]) {
                    stateBoardLink.href = boardLinks[studentInfo.board];
                    stateBoardLink.textContent = `${studentInfo.board} Board Resources`;
                    stateBoardLink.target = '_blank';
                }
            }
        }

        // Logout functionality
        document.querySelector('.logout-link').addEventListener('click', async (e) => {
            e.preventDefault();
            await fetch(`${API_URL}/logout`, { method: 'POST', credentials: 'include' });
            localStorage.clear();
            window.location.href = 'login.html';
        });
    </script>
</body>
</html>